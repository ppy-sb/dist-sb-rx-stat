(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["beatmap"],{"009f":function(t,e,r){"use strict";var n=r("3612"),a=r.n(n);a.a},"0a49":function(t,e,r){var n=r("9b43"),a=r("626a"),i=r("4bf8"),s=r("9def"),o=r("cd1c");t.exports=function(t,e){var r=1==t,c=2==t,u=3==t,l=4==t,d=6==t,p=5==t||d,f=e||o;return function(e,o,m){for(var h,b,v=i(e),y=a(v),g=n(o,m,3),x=s(y.length),w=0,_=r?f(e,x):c?f(e,0):void 0;x>w;w++)if((p||w in y)&&(h=y[w],b=g(h,w,v),t))if(r)_[w]=b;else if(b)switch(t){case 3:return!0;case 5:return h;case 6:return w;case 2:_.push(h)}else if(l)return!1;return d?-1:u||l?l:_}}},"0c4c":function(t,e,r){},1169:function(t,e,r){var n=r("2d95");t.exports=Array.isArray||function(t){return"Array"==n(t)}},"1df8":function(t,e,r){var n=r("63b6");n(n.S,"Object",{setPrototypeOf:r("ead6").set})},2079:function(t,e,r){},"20d6":function(t,e,r){"use strict";var n=r("5ca1"),a=r("0a49")(6),i="findIndex",s=!0;i in[]&&Array(1)[i]((function(){s=!1})),n(n.P+n.F*s,"Array",{findIndex:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")(i)},2552:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"d-flex"},[r("span",{attrs:{id:"table-user-"+t.user.id}},[t._v(t._s(t.user.username))]),r("b-popover",{attrs:{target:"table-user-"+t.user.id,triggers:"hover",placement:"top"}},[r("router-link",{attrs:{to:{name:"users",params:{handle:t.user.id,mode:t.mode?t.mode:void 0,rx:t.rx?t.rx:void 0}}}},[r("div",{staticClass:"d-flex"},[r("div",{staticClass:"score-table-crop-img img-2x mr-2"},[r("lazy-image",{key:"score-avatar-"+t.user.id,staticStyle:{width:"100%"},attrs:{src:"https://a.ppy.sb/"+t.user.id,"src-placeholder":"https://a.ppy.sb/-1"}})],1),r("div",[""!==t.user.username_aka?r("div",[r("span",{staticClass:"mr-2"},[t._v("aka")]),r("h6",{staticClass:"text-nowrap"},[t._v(t._s(t.user.username_aka))])]):r("div",[r("h6",{staticClass:"text-nowrap"},[t._v(t._s(t.user.username))])])])])])],1)],1)},a=[],i=(r("c5f6"),r("643b")),s={components:{LazyImage:i["a"]},props:{user:{type:Object,default:function(){return{id:-1,username:"Guest",username_aka:""}}},mode:{type:[String,Number],default:"std"},rx:{type:[String,Boolean],default:""}}},o=s,c=(r("fae3"),r("0c7c")),u=Object(c["a"])(o,n,a,!1,null,"fd3cc6b4",null);e["a"]=u.exports},"25b0":function(t,e,r){r("1df8"),t.exports=r("584a").Object.setPrototypeOf},"27f1":function(t,e,r){"use strict";var n=r("77c1"),a=r.n(n);a.a},"2f21":function(t,e,r){"use strict";var n=r("79e5");t.exports=function(t,e){return!!t&&n((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},3612:function(t,e,r){},"37af":function(t,e,r){var n,a,i;(function(r,s){a=[],n=s,i="function"===typeof n?n.apply(e,a):n,void 0===i||(t.exports=i)})(0,(function(){"use strict";function t(t,e){var r,n,a;for(r=1,n=arguments.length;r<n;++r)if(e=arguments[r],null!=e)for(a in e)s(e,a)&&(t[a]=e[a]);return t}function e(t,e){return e.length-t.length}function r(t,e){return t.factor-e.factor}function n(t){return t.replace(/([.*+?=^!:${}()|[\]/\\])/g,"\\$1")}function a(t,e){var r,n;for(r=0,n=t.length;r<n;++r)e(t[r],r)}function i(t,e){var r;for(r in t)s(t,r)&&e(t[r],r)}var s=function(t){return function(e,r){return null!=e&&t.call(e,r)}}(Object.prototype.hasOwnProperty);function o(t,e){while("string"===typeof e)e=t[e];return e}function c(t){this._prefixes=t;var a=[],o=[];i(t,(function(t,e){a.push(n(e)),o.push({factor:t,prefix:e})}));var c=this._lcPrefixes={};i(t,(function(e,r){var n=r.toLowerCase();s(t,n)||(c[n]=r)})),o.sort(r),this._list=o,a.sort(e),this._regexp=new RegExp("^\\s*(-)?\\s*(\\d+(?:\\.\\d+)?)\\s*("+a.join("|")+")\\s*(.*)\\s*?$","i")}c.create=function(t,e,r){var n={};return void 0===r&&(r=0),a(t,(function(t,a){n[t]=Math.pow(e,a+r)})),new c(n)},c.prototype.findPrefix=function(t){var e,r,n=this._list,a=0,i=n.length-1;while(a!==i)e=a+i+1>>1,r=n[e].factor,r>t?i=e-1:a=e;return n[a]},c.prototype.parse=function(t,e){var r=t.match(this._regexp);if(null!==r){var n,a=r[3];if(s(this._prefixes,a))n=this._prefixes[a];else{if(e||(a=a.toLowerCase(),!s(this._lcPrefixes,a)))return;a=this._lcPrefixes[a],n=this._prefixes[a]}var i=+r[2];return void 0!==r[1]&&(i=-i),{factor:n,prefix:a,unit:r[4],value:i}}};var u={binary:c.create(",Ki,Mi,Gi,Ti,Pi,Ei,Zi,Yi".split(","),1024),SI:c.create("y,z,a,f,p,n,Âµ,m,,k,M,G,T,P,E,Z,Y".split(","),1e3,-8)},l={decimals:2,separator:" ",unit:""},d={scale:"SI",strict:!1};function p(e,r){r=t({},l,r);var n=h(e,r);e=String(n.value);var a=n.prefix+r.unit;return""===a?e:e+r.separator+a}function f(t,e){var r=m(t,e);return r.value*r.factor}function m(e,r){if("string"!==typeof e)throw new TypeError("str must be a string");r=t({},d,r);var n=o(u,r.scale);if(void 0===n)throw new Error("missing scale");var a=n.parse(e,r.strict);if(void 0===a)throw new Error("cannot parse str");return a}function h(e,r){if(0===e)return{value:0,prefix:""};if(e<0){var n=h(-e,r);return n.value=-n.value,n}if("number"!==typeof e||Number.isNaN(e))throw new TypeError("value must be a number");r=t({},d,r);var a,i=o(u,r.scale);if(void 0===i)throw new Error("missing scale");var c=r.decimals;void 0!==c&&(a=Math.pow(10,c));var l,p=r.prefix;if(void 0!==p){if(!s(i._prefixes,p))throw new Error("invalid prefix");l=i._prefixes[p]}else{var f=i.findPrefix(e);if(void 0!==a)do{l=f.factor;var m=l/a;e=Math.round(e/m)*m}while((f=i.findPrefix(e)).factor!==l);else l=f.factor;p=f.prefix}return{prefix:p,value:void 0===a?e/l:Math.round(e*a/l)/a}}return p.parse=f,f.raw=m,p.raw=h,p.Scale=c,p}))},"4d16":function(t,e,r){t.exports=r("25b0")},"4edb":function(t,e,r){},"4fba":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("section-layout",{attrs:{"section-class":"section-lg",shaped:"","bg-variant":"dark"}},[r("card",{attrs:{shadow:""}},[r("mode-switcher",{model:{value:t.numericMode,callback:function(e){t.numericMode=e},expression:"numericMode"}})],1)],1),r("section-layout",{attrs:{shaped:"","container-class":"py-0"}},[r("card",{attrs:{"no-body":"",shadow:""}},[r("leaderboard-table",{attrs:{players:t.currentPagePlayers,country:t.country?t.country:void 0,mode:t.mode?t.mode:void 0,rx:t.rx?t.rx:void 0}}),r("base-pagination",{staticClass:"my-2",attrs:{"per-page":t.perPage,total:1e3,align:"center"},model:{value:t.leaderboardCurrentPage,callback:function(e){t.leaderboardCurrentPage=e},expression:"leaderboardCurrentPage"}})],1)],1)],1)},a=[],i=(r("96cf"),r("3b8d")),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-table",{staticClass:"mb-0 text-nowrap",attrs:{items:t.players,fields:t.fields,borderless:"",striped:"",responsive:"","show-empty":"","table-variant":"secondary","td-class":""},scopedSlots:t._u([{key:"head()",fn:function(e){return["chosen_mode.country_leaderboard_rank"==e.column?r("div",[r("router-link",{attrs:{to:{name:"leaderboard",params:{mode:t.mode?t.mode:void 0,rx:t.rx?t.rx:void 0}}}},[r("gb-flag",{staticClass:"pr-2",attrs:{code:t.country,size:"small","icon-path":"assets/flags"}})],1)],1):r("div",[t._v(t._s(t.$t("leaderboard."+e.label)))])]}},{key:"cell(user)",fn:function(e){return[r("div",{staticClass:"d-flex"},[r("router-link",{attrs:{to:{name:"country-leaderboard",params:{country:e.item.country,mode:t.mode?t.mode:void 0,rx:t.rx?t.rx:void 0}}}},[""==t.country?r("gb-flag",{staticClass:"mr-2",attrs:{code:e.item.country,size:"small","icon-path":"assets/flags"}}):t._e()],1),r("div",{staticClass:"d-flex"},[r("table-user",{attrs:{user:e.item,mode:t.mode?t.mode:void 0,rx:t.rx?t.rx:void 0}})],1)],1)]}}])})},o=[],c=(r("28a5"),r("75fc")),u=r("2552"),l=(r("e2ee"),r("accd"),r("37af")),d={components:{TableUser:u["a"]},props:{players:{type:Array,default:function(){return[]}},country:{type:String,default:""},mode:{type:String,default:""},rx:{type:String,default:""}},data:function(){return{logger:!1,StaticRows:[{label:"user",key:"user"},{label:"accuracy",key:"chosen_mode.accuracy",formatter:function(t){return(parseFloat(t)/100).toLocaleString("en",{style:"percent",minimumSignificantDigits:2,maximumSignificantDigits:4})},thClass:["text-right"],tdClass:["text-right"]},{label:"rankedScore",key:"chosen_mode.ranked_score",formatter:function(t){return t.toLocaleString("en",{style:"decimal"})},thClass:["text-right"],tdClass:["text-right"]},{label:"totalScore",key:"chosen_mode.total_score",formatter:function(t){return t.toLocaleString("en",{style:"decimal"})},thClass:["text-right"],tdClass:["text-right"]},{label:"pp",key:"chosen_mode.pp",formatter:function(t){return"".concat(t.toLocaleString("en",{style:"decimal"}),"pp")},thClass:["text-right"],tdClass:["text-right"]}]}},mounted:function(){this.init()},computed:{bid:function(){return this.beatmap.id},fields:function(){return[{label:"index",key:this.country?"chosen_mode.country_leaderboard_rank":"chosen_mode.global_leaderboard_rank",formatter:function(t){return"#".concat(t)},thClass:["text-right"],tdClass:["text-right"]}].concat(Object(c["a"])(this.StaticRows))}},methods:{init:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.log(this.fields,"fields");case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),smallerFloatHtml:function(t){var e=t.split(".");return"".concat(e[0],'<small class="float-number">.').concat(e[1],"</small></span>")},htmlCounts:function(t){var e=[{count:t[100],append:"x 100"},{count:t[50],append:"x 50"},{count:t.miss,append:"Miss"}].filter((function(t){var e=t.count;return e})).map((function(t){var e=t.count,r=t.append;return"".concat(e,' <small class="float-number">').concat(r,"</small>")})).join(", ");return e},humanFormat:function(){return l.apply(void 0,arguments)}}},p=d,f=(r("84de"),r("0c7c")),m=Object(f["a"])(p,s,o,!1,null,null,null),h=m.exports,b=r("97a9"),v=r("6323"),y=r("bc3a"),g={components:{SectionLayout:v["a"],ModeSwitcher:b["a"],LeaderboardTable:h},data:function(){return{logger:!0,ready:!1,fetchedPage:{},perPage:50,leaderboardCurrentPage:1}},props:["mode","rx","country"],head:{title:function(){var t=" > ",e=["Leaderboard"],r=e.join(t);return{inner:r}}},watch:{$route:function(){this.init()}},mounted:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),computed:{numericMode:{get:function(){return this.toNumericalMode(this.mode)},set:function(t){this.$router.push({name:this.country?"country-leaderboard":"leaderboard",params:{mode:this.toStrMode(t),rx:this.rx?this.rx:void 0,country:this.country}})}},strMode:function(){return this.toStrMode()}},asyncComputed:{currentPagePlayers:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.fetchPage();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},methods:{init:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.log(this.$props,"props"),this.fetchedPage={};case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),fetchPage:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,r,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=n.length>0&&void 0!==n[0]?n[0]:this.leaderboardCurrentPage,!this.fetchedPage[e]||"array"!=typeof this.fetchedPage[e]){t.next=3;break}return t.abrupt("return",this.fetchedPage[e]);case 3:return this.ready=!1,t.next=6,y({url:"https://osu.ppy.sb/api/v1/leaderboard",params:{mode:this.numericMode,p:e,l:this.perPage,rx:!!this.rx,country:this.country?this.country.toLowerCase():void 0}}).then((function(t){return t.data})).then((function(t,e){return 200==t.code?t.users:e("code returns false")})).catch((function(t){}));case 6:return r=t.sent,this.fetchedPage[e]=r,this.ready=!0,t.abrupt("return",r);case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),toNumericalMode:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.mode;switch(t){case"std":case"osu":return 0;case"taiko":return 1;case"catch":case"ctb":return 2;case"mania":return 3;default:return NaN==parseInt(t)?0:parseInt(t)}},toStrMode:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.numericMode;switch(t){case 0:return"std";case 1:return"taiko";case 2:return"ctb";case 3:return"mania";default:break}}}},x=g,w=(r("009f"),Object(f["a"])(x,n,a,!1,null,"c49db980",null));e["default"]=w.exports},"508e":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("profile-layout",[t.ready?r("top-section-layout",[r("beatmap-info",{attrs:{beatmap:t.currentMap},scopedSlots:t._u([{key:"diff-switcher",fn:function(){return[r("b-tabs",{attrs:{pills:""},model:{value:t.diffIndex,callback:function(e){t.diffIndex=e},expression:"diffIndex"}},t._l(t.set,(function(e){return r("b-tab",{key:"diff-switch-"+e.id,attrs:{"title-item-class":"mb-2 pr-2"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(t._s(e.version))]},proxy:!0}],null,!0)})})),1)]},proxy:!0}],null,!1,1884517181)})],1):t._e(),t.ready?r("section-layout",{attrs:{"section-class":"pt-0","container-class":"pt-0"}},[t.osuWebCompatible?r("card",{staticClass:"border-0",attrs:{shadow:"","no-body":""}},[r("beatmap-preview",{attrs:{beatmapId:t.beatmapId,beatmapSetId:t.beatmapSetId}})],1):r("card",{attrs:{shadow:""}},[t._v("\n            Safari is not compatible with preview.\n        ")])],1):t._e(),t.ready?r("section-layout",{attrs:{"section-class":"py-0","container-class":"pt-0"}},[r("card",{attrs:{shadow:""}},[r("mode-switcher",{model:{value:t.numericMode,callback:function(e){t.numericMode=e},expression:"numericMode"}})],1)],1):t._e(),t.ready?r("section-layout",{attrs:{"bg-variant":"success",skew:"",shaped:""}},[r("beatmap-scores",{attrs:{scores:t.currentMapScores,mode:t.mode?t.mode:void 0,rx:t.rx?t.rx:void 0}})],1):t._e()],1)},a=[],i=r("a5b2"),s=r.n(i),o=r("4d16"),c=r.n(o);function u(t,e){return u=c.a||function(t,e){return t.__proto__=e,t},u(t,e)}function l(){if("undefined"===typeof Reflect||!s.a)return!1;if(s.a.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(s()(Date,[],(function(){}))),!0}catch(t){return!1}}function d(t,e,r){return d=l()?s.a:function(t,e,r){var n=[null];n.push.apply(n,e);var a=Function.bind.apply(t,n),i=new a;return r&&u(i,r.prototype),i},d.apply(null,arguments)}var p=r("75fc"),f=(r("28a5"),r("55dd"),r("20d6"),r("7514"),r("96cf"),r("3b8d")),m=r("97a9"),h=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("card",{staticClass:"border-0 mt--300",attrs:{shadow:"","no-body":"",hover:""}},[r("b-card-img",{staticClass:"lighter",attrs:{src:"https://assets.ppy.sh/beatmaps/"+t.bsid+"/covers/cover.jpg"}}),r("b-card-body",{staticClass:"card-img-overlay"},[r("b-card-title",[t._v(t._s(t.songName))])],1),r("div",{staticClass:"switcher d-flex"},[r("div",{staticClass:"mt-auto"},[t._t("diff-switcher")],2)])],1)},b=[],v=r("643b"),y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("img",{staticClass:"rounded",class:[t.avatar?"rounded-circle":""],attrs:{src:t.src,alt:t.alt}})},g=[],x={props:["src","alt","avatar"]},w=x,_=(r("27f1"),r("0c7c")),S=Object(_["a"])(w,y,g,!1,null,"0f339586",null),k=S.exports,I={props:["beatmap"],components:{ShadowImg:k},computed:{bsid:function(){return this.beatmap.beatmapSetId},songName:function(){return"".concat(this.beatmap.artist," - ").concat(this.beatmap.title)}}},M=I,C=(r("910d"),Object(_["a"])(M,h,b,!1,null,"1b2ded4b",null)),R=C.exports,j=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("card",{attrs:{"no-body":"",shadow:""}},[r("b-table",{staticClass:"mb-0 text-nowrap",attrs:{items:t.scores,fields:t.fields,borderless:"",striped:"",responsive:"","show-empty":"","table-variant":"secondary","td-class":""},scopedSlots:t._u([{key:"head()",fn:function(e){return[t._v("\n            "+t._s(t.$t("beatmaps."+e.label))+"\n        ")]}},{key:"cell(index)",fn:function(e){return[t._v(t._s(e.index+1))]}},{key:"cell(date)",fn:function(e){return[r("span",[t._v(t._s(e.value))])]}},{key:"cell(score)",fn:function(e){return[r("span",[t._v("\n                "+t._s(parseInt(e.value).toLocaleString("en",{style:"decimal"}))+"\n            ")])]}},{key:"cell(stats)",fn:function(e){return[r("span",{staticClass:"mr-1",domProps:{innerHTML:t._s(t.smallerFloatHtml(e.item.accuracy.toLocaleString("en",{style:"percent",minimumSignificantDigits:2,maximumSignificantDigits:4}))+",")}}),r("span",{domProps:{innerHTML:t._s(t.htmlCounts(e.item.counts))}})]}},{key:"cell(user)",fn:function(e){return[r("table-user",{attrs:{user:{id:e.value.id,username:e.value.name,username_aka:""},mode:t.mode?t.mode:void 0,rx:t.rx?t.rx:void 0}})]}}])})],1)},P=[],O=(r("c5f6"),r("2552")),$=r("e2ee"),L=(r("accd"),r("37af")),F={components:{LazyImage:v["a"],TableUser:O["a"]},data:function(){var t=this;return{logger:!1,fields:[{label:"index",key:"index"},{label:"user",key:"user"},{label:"score",key:"score"},{label:"ingredient",key:"stats"},{label:"combo",key:"maxCombo"},{label:"playedAt",key:"date",sortable:!0,formatter:function(e,r,n){var a=t.moment(e);return"".concat(a.format("l")," ").concat(a.format("LT"))}},{label:"pp",key:"pp",sortable:!0,formatter:function(t){return t.toFixed(2)}},{label:"mods",key:"raw_mods",formatter:function(t){return $["a"].toModList(t).join(" ")}}]}},props:{scores:{type:Array,default:function(){return[]}},mode:{type:[String,Number],default:"std"},rx:{type:[String,Boolean],default:""}},mounted:function(){this.init()},computed:{bid:function(){return this.beatmap.id}},methods:{init:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.log(this.fields,"fields");case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),smallerFloatHtml:function(t){var e=t.split(".");return e.length<=1?t:"".concat(e[0],'<small class="float-number">.').concat(e[1],"</small></span>")},htmlCounts:function(t){var e=[{count:t[100],append:"x 100"},{count:t[50],append:"x 50"},{count:t.miss,append:"Miss"}].filter((function(t){var e=t.count;return e})).map((function(t){var e=t.count,r=t.append;return"".concat(e,' <small class="float-number">').concat(r,"</small>")})).join(", ");return e},humanFormat:function(){return L.apply(void 0,arguments)}}},N=F,E=(r("7f33f"),Object(_["a"])(N,j,P,!1,null,null,null)),A=E.exports,T=r("6323"),B=r("3f62"),D=r("b363"),H=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-embed",{staticStyle:{"border-radius":"0.25rem"},attrs:{type:"iframe",aspect:"4by3",src:"./osu/preview.html?sid="+t.beatmapSetId+"&bid="+t.beatmapId,allowfullscreen:""}})},z=[],J={props:["beatmapId","beatmapSetId"]},G=J,U=Object(_["a"])(G,H,z,!1,null,null,null),W=U.exports,q=r("accd"),Y={components:{ModeSwitcher:m["a"],BeatmapInfo:R,BeatmapScores:A,TopSectionLayout:B["a"],SectionLayout:T["a"],ProfileLayout:D["a"],BeatmapPreview:W},data:function(){return{logger:!0,set:[],api:void 0,ready:!1,modeScores:{0:{},1:{},2:{},3:{}}}},props:["beatmapSetId","beatmapId","mode","rx"],watch:{beatmapSetId:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.log("switch set","logging"),t.next=3,this.init();case 3:this.$emit("updateHead");case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),beatmapId:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$emit("updateHead");case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mode:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$emit("updateHead");case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},head:{title:function(){var t=" > ",e=[this.ready?this.currentMap.version:"loading"];e.push(this.songName||"loading");var r=e.join(t);return{inner:r}}},mounted:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.log(["beatmapSetId","beatmapId","mode","rx"].reduce((function(t,r){return t[r]=e[r],t}),{}),"variables"),null==this.beatmapId&&null==this.beatmapSetId&&this.log("parameter wrong..","error",{variant:"error"}),t.next=4,this.init();case 4:this.$emit("updateHead");case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),computed:{osuWebCompatible:function(){return!this.$browserDetect.isSafari},currentMap:{get:function(){var t=this;return this.set.find((function(e){return e.id==t.beatmapId}))}},numericMode:{get:function(){switch(this.mode){case"std":case"osu":return 0;case"taiko":return 1;case"catch":case"ctb":return 2;case"mania":return 3;default:return 0}},set:function(t){this.$router.push({name:"beatmapsets",params:{beatmapSetId:this.beatmapSetId,beatmapId:this.beatmapId,mode:this.toStrMode(t),rx:this.rx?this.rx:void 0}})}},scores:function(){return this.modeScores[this.numericMode]},songName:function(){return this.ready?"".concat(this.currentMap.artist," - ").concat(this.currentMap.title):""},bsid:function(){return this.beatmapSetId?this.beatmapSetId:this.currentMap?this.currentMap.beatmapSetId:this.set.length>0?this.set[0].beatmapSetId:-1},diffIndex:{get:function(){var t=this;return this.set.findIndex((function(e){return e.id==t.beatmapId}))||0},set:function(t){this.$router.push({name:"beatmapsets",params:{beatmapSetId:this.beatmapSetId,beatmapId:this.set[t].id}})}}},asyncComputed:{currentMapScores:{get:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.ready){t.next=4;break}return t.next=3,this.getScoresById(this.currentMap.id);case 3:return t.abrupt("return",t.sent);case 4:return t.abrupt("return",[]);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},methods:{init:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.ready=!1,this.api=new q.Api("A3tGREAemXk213gfJJUewH9675g",{baseUrl:this.$root.peppyApiBase,parseNumeric:!0}),t.next=3,this.getMaps();case 3:return t.next=5,this.setBeatmapId();case 5:this.ready=!0;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getMaps:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.beatmapSetId){t.next=5;break}return t.next=3,this.getSetMaps();case 3:t.next=10;break;case 5:if(!this.beatmapId){t.next=10;break}return t.next=8,this.getMapFromId().then((function(t){return t[0]}));case 8:e=t.sent,e.beatmapSetId&&(this.beatmapSetId=e.beatmapSetId,this.set.push(e),this.getSetMaps());case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getSetMaps:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.api.getBeatmaps({s:this.beatmapSetId});case 2:e=t.sent,e.sort((function(t,e){return t.difficulty.rating-e.difficulty.rating})),this.set=e;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getMapFromId:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var e,r=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:this.beatmapId,t.next=3,this.api.getBeatmaps({b:e});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getScoresById:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var e,r=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:this.beatmapId,!this.scores[e]){t.next=5;break}return t.abrupt("return",this.scores[e]);case 5:return t.next=7,this.fetchScores({b:e,m:this.numericMode,limit:100});case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),safariCanNotParseMysqlDateTimeWhy:function(t){var e=t.split(/[- :]/);e[1]--;var r=d(Date,Object(p["a"])(e));return r},fetchScores:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(e){var r,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.api.getScores(e);case 3:return r=t.sent,r=r.map((function(t){var e=JSON.parse(JSON.stringify(t));return t._beatmap=n.currentMap,["accuracy","mods","date"].map((function(r){return e[r]=t[r]})),isNaN(e.date.getTime())&&(e.date=n.safariCanNotParseMysqlDateTimeWhy(e.raw_date)),e})),this.scores[e.b]=r,t.abrupt("return",r);case 9:return t.prev=9,t.t0=t["catch"](0),this.log(t.t0,"error on get scores",{variant:"danger"}),t.abrupt("return",[]);case 13:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(e){return t.apply(this,arguments)}return e}(),setBeatmapId:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.beatmapId=this.beatmapId,null==this.beatmapId&&this.set.length>0&&(this.beatmapId=this.set[0].id);case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),toStrMode:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.numericMode;switch(t){case 0:return"std";case 1:return"taiko";case 2:return"ctb";case 3:return"mania";default:break}}}},Z=Y,K=(r("6700"),Object(_["a"])(Z,n,a,!1,null,"4e7a4db9",null));e["default"]=K.exports},"55dd":function(t,e,r){"use strict";var n=r("5ca1"),a=r("d8e8"),i=r("4bf8"),s=r("79e5"),o=[].sort,c=[1,2,3];n(n.P+n.F*(s((function(){c.sort(void 0)}))||!s((function(){c.sort(null)}))||!r("2f21")(o)),"Array",{sort:function(t){return void 0===t?o.call(i(this)):o.call(i(this),a(t))}})},6700:function(t,e,r){"use strict";var n=r("4edb"),a=r.n(n);a.a},"733c":function(t,e,r){var n=r("63b6"),a=r("a159"),i=r("79aa"),s=r("e4ae"),o=r("f772"),c=r("294c"),u=r("c189"),l=(r("e53d").Reflect||{}).construct,d=c((function(){function t(){}return!(l((function(){}),[],t)instanceof t)})),p=!c((function(){l((function(){}))}));n(n.S+n.F*(d||p),"Reflect",{construct:function(t,e){i(t),s(e);var r=arguments.length<3?t:i(arguments[2]);if(p&&!d)return l(t,e,r);if(t==r){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(u.apply(t,n))}var c=r.prototype,f=a(o(c)?c:Object.prototype),m=Function.apply.call(t,f,e);return o(m)?m:f}})},7514:function(t,e,r){"use strict";var n=r("5ca1"),a=r("0a49")(5),i="find",s=!0;i in[]&&Array(1)[i]((function(){s=!1})),n(n.P+n.F*s,"Array",{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")(i)},"77c1":function(t,e,r){},"7f33f":function(t,e,r){"use strict";var n=r("0c4c"),a=r.n(n);a.a},"84de":function(t,e,r){"use strict";var n=r("b1a8"),a=r.n(n);a.a},"910d":function(t,e,r){"use strict";var n=r("a03f"),a=r.n(n);a.a},a03f:function(t,e,r){},a5b2:function(t,e,r){t.exports=r("aa28")},aa28:function(t,e,r){r("733c"),t.exports=r("584a").Reflect.construct},b1a8:function(t,e,r){},c189:function(t,e,r){"use strict";var n=r("79aa"),a=r("f772"),i=r("3024"),s=[].slice,o={},c=function(t,e,r){if(!(e in o)){for(var n=[],a=0;a<e;a++)n[a]="a["+a+"]";o[e]=Function("F,a","return new F("+n.join(",")+")")}return o[e](t,r)};t.exports=Function.bind||function(t){var e=n(this),r=s.call(arguments,1),o=function(){var n=r.concat(s.call(arguments));return this instanceof o?c(e,n.length,n):i(e,n,t)};return a(e.prototype)&&(o.prototype=e.prototype),o}},cd1c:function(t,e,r){var n=r("e853");t.exports=function(t,e){return new(n(t))(e)}},e853:function(t,e,r){var n=r("d3f4"),a=r("1169"),i=r("2b4c")("species");t.exports=function(t){var e;return a(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!a(e.prototype)||(e=void 0),n(e)&&(e=e[i],null===e&&(e=void 0))),void 0===e?Array:e}},ead6:function(t,e,r){var n=r("f772"),a=r("e4ae"),i=function(t,e){if(a(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=r("d864")(Function.call,r("bf0b").f(Object.prototype,"__proto__").set,2),n(t,[]),e=!(t instanceof Array)}catch(a){e=!0}return function(t,r){return i(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),check:i}},fae3:function(t,e,r){"use strict";var n=r("2079"),a=r.n(n);a.a}}]);
//# sourceMappingURL=beatmap.ffcac00d.js.map